<% layout('layout') -%>

<header class="hero">
  <div class="hero__content">
    <h1>Chào mừng đến với cửa hàng điện tử group 2</h1>
    <p>Khám phá những sản phẩm mới nhất với giá tốt nhất.</p>
    <a href="/products" class="btn btn-primary">Mua sắm ngay</a>
  </div>
</header>

<section class="section">
  <div class="section__head">
    <h2>Sản phẩm nổi bật</h2>
    <a href="/products" class="link">Xem tất cả</a>
  </div>

  <% if (!products || !products.length) { %>
    <p>Chưa có sản phẩm nào.</p>
  <% } else { %>
    <div class="grid grid-4">
      <% products.forEach(p => { %>
        <article class="card product-card">
          <a class="product-card__thumb" href="/products/<%= p.id %>">
            <img src="<%= p.image || 'https://via.placeholder.com/400x300?text=No+Image' %>" alt="<%= p.name %>">
          </a>
          <div class="product-card__body">
            <h3 class="product-card__title"><a href="/products/<%= p.id %>"><%= p.name %></a></h3>
            <p class="product-card__price"><%= fmtPrice(p.price) %></p>
            <div class="product-card__actions">
              <a href="/products/<%= p.id %>" class="btn btn-outline">Xem</a>
              <% if ((p.stock || 0) > 0) { %>
                <form method="POST" action="/cart/add/<%= p.id %>">
                  <button class="btn btn-primary" type="submit">Thêm vào giỏ</button>
                </form>
              <% } else { %>
                <span class="muted">Hết hàng</span>
              <% } %>
            </div>
          </div>
        </article>
      <% }) %>
    </div>
  <% } %>
</section>
